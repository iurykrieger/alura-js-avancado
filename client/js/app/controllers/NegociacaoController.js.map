{"version":3,"sources":["../../app-es6/controllers/NegociacaoController.js"],"names":["NecociacaoController","$","document","querySelector","bind","_inputData","_inputQuantidade","_inputValor","_actualColumn","_service","NegociacaoService","_mensagem","Bind","Mensagem","MensagemView","_negociacoesList","NegociacaoList","NegociacoesView","_init","load","setInterval","import","loadAll","then","negociacoes","forEach","add","negociacao","catch","texto","error","event","preventDefault","save","_createNegociacao","_cleanForm","deleteAll","clean","message","column","reverse","orderBy","a","b","Negociacao","DateHelper","textToDate","value","parseInt","parseFloat","focus"],"mappings":"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","file":"NegociacaoController.js","sourcesContent":["class NecociacaoController {\n\tconstructor() {\n\t\tlet $ = document.querySelector.bind(document);\n\t\tthis._inputData = $('#data');\n\t\tthis._inputQuantidade = $('#quantidade');\n\t\tthis._inputValor = $('#valor');\n\t\tthis._actualColumn = '';\n\t\tthis._service = new NegociacaoService();\n\t\tthis._mensagem = new Bind(new Mensagem(), new MensagemView($('#mensagemView')), 'texto');\n\t\tthis._negociacoesList = new Bind(\n\t\t\tnew NegociacaoList(),\n\t\t\tnew NegociacoesView($('#negociacoesView')),\n\t\t\t'add',\n\t\t\t'clean',\n\t\t\t'orderBy',\n\t\t\t'reverse'\n\t\t);\n\t\tthis._init();\n\t}\n\n\t_init() {\n\t\tthis.load();\n\t\tsetInterval(() => {\n\t\t\tthis.import();\n\t\t}, 1000);\n\t}\n\n\tload() {\n\t\tthis._service\n\t\t\t.loadAll()\n\t\t\t.then(negociacoes =>\n\t\t\t\tnegociacoes.forEach(negociacao => this._negociacoesList.add(negociacao))\n\t\t\t)\n\t\t\t.catch(error => (this._mensagem.texto = error));\n\t}\n\n\tadd(event) {\n\t\tevent.preventDefault();\n\t\tthis._service\n\t\t\t.save(this._createNegociacao())\n\t\t\t.then(negociacao => {\n\t\t\t\tthis._negociacoesList.add(negociacao);\n\t\t\t\tthis._mensagem.texto = 'Negociação adicionada com sucesso!';\n\t\t\t\tthis._cleanForm();\n\t\t\t})\n\t\t\t.catch(error => (this._mensagem.texto = error));\n\t}\n\n\tremove(event) {\n\t\tthis._service\n\t\t\t.deleteAll()\n\t\t\t.then(message => {\n\t\t\t\tthis._negociacoesList.clean();\n\t\t\t\tthis._mensagem.texto = message;\n\t\t\t})\n\t\t\t.catch(error => (this._mensagem.texto = error));\n\t}\n\n\timport() {\n\t\tthis._service\n\t\t\t.import(this._negociacoesList)\n\t\t\t.then(negociacoes => {\n\t\t\t\tnegociacoes.forEach(negociacao => this._negociacoesList.add(negociacao));\n\t\t\t\tthis._mensagem.texto = 'Negociações do período importadas com sucesso';\n\t\t\t})\n\t\t\t.catch(error => (this._mensagem.texto = error));\n\t}\n\n\torderBy(column) {\n\t\tif (column == this._actualColumn) {\n\t\t\tthis._negociacoesList.reverse();\n\t\t} else {\n\t\t\tthis._negociacoesList.orderBy((a, b) => a[column] - b[column]);\n\t\t}\n\t\tthis._actualColumn = column;\n\t}\n\n\t_createNegociacao() {\n\t\treturn new Negociacao(\n\t\t\tDateHelper.textToDate(this._inputData.value),\n\t\t\tparseInt(this._inputQuantidade.value),\n\t\t\tparseFloat(this._inputValor.value)\n\t\t);\n\t}\n\n\t_cleanForm() {\n\t\tthis._inputData.value = '';\n\t\tthis._inputQuantidade.value = 1;\n\t\tthis._inputValor.value = 0.0;\n\t\tthis._inputData.focus();\n\t}\n}\n"]}